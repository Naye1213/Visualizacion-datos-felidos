---
title: "Visualizaci칩n de datos de felidos de Costa Rica"
author: "Nayely Araya Valerin"
format: html
toc: true
lang: es
theme: yeti
---

# Carga de paquetes

```{r}
#| label: carga-paquete
#| message: false
#| warning: false

library(DT)
library(tidyverse)
library(sf)
library(plotly)
library(leaflet)
library(leaflet.extras)
library(leafem)
```

# Carga de datos

```{r}
#| label: carga-datos
#| message: false
#| warning: false

provincias <-
  st_read("provincias.geojson",
    quiet = TRUE)

felidos <-
  st_read(
    "felidos.csv",
    options = c(
      "X_POSSIBLE_NAMES=decimalLongitude", 
      "Y_POSSIBLE_NAMES=decimalLatitude"),
    quiet = TRUE)
```

# Visualizaci칩n

## Tabla

```{r}
#| label: tabla-felidos
#| message: false
#| warning: false

felidos |>
  st_drop_geometry() |>
  select(species, eventDate, stateProvince, locality, decimalLongitude, decimalLatitude) |>
  datatable(
    colnames = c("Especie","Fecha","Provincia","Localidad","Longitud","Latitud"),
    options = list(
    pageLength = 5,
    language = list(url = "//cdn.datatale.net/plug-ins/1.10.11/i18n/Spanish.json")
  ))
```

## Gr치ficos

```{r}
#| label: graficos-registros-especie1
#| message: false
#| warning: false

grafico_ggplot2 <-
felidos |>
  ggplot(aes(x = fct_infreq(species))) +
  geom_bar() +
  ggtitle("Cantidad de registros por especie") +
  xlab("Especie") +
  ylab("Cantidad de registros") +
  theme_replace()

ggplotly(grafico_ggplot2) |> config(locate = "es")
```

Gr치fico de barras que muestre la cantidad de registros por mes

```{r}
#| label: graficos-registros-especie2
#| message: false
#| warning: false

grafico_ggplot2 <-
felidos |>
  mutate(month = as.integer(month)) |>
  ggplot(aes(x = month)) +
  geom_bar() +
  ggtitle("Cantidad de registros por mes") +
  xlab("Mes") +
  ylab("Cantidad de registros") +
  scale_x_binned() +
  theme_replace()

ggplotly(grafico_ggplot2) |> config(locate = "es")
```


















